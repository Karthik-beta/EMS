<nav class="navbar navbar-expand-md navbar-light bg-white shadow-sm mb-2">
  <div class="container-fluid">
    <a routerLink="/admin" class="navbar-brand">
      <img src="assets/images/Magnum.png" alt="" width="150" height="40">
    </a>

    <ul class="navbar-nav me-auto mb-2 mb-md-0">
      <li class="nav-item">
        <a routerLink="/admin" class="nav-link">Dashboard</a>
      </li>

      <li class="nav-item">
        <a routerLink="/andon" class="nav-link">Andon Call Help</a>
      </li>

      <li class="nav-item">
        <a routerLink="/andonb" class="nav-link">Andon Breakdown</a>
      </li>

      <li class="nav-item">
        <a routerLink="/alert" class="nav-link"><i class="fa-solid fa-bell"></i></a>
      </li>
    </ul>



    <ul class="navbar-nav ms-auto">
      <li class="nav-item">
        <a routerLink="/login" class="nav-link">Logout</a>
      </li>
    </ul>
  </div>
</nav>





<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-md-1">
      <div class="mt-1 card-top ">
        <img class="siren-icon siren-icon-left" src="https://img.icons8.com/ios-filled/100/40C057/siren.png" alt="siren" width="70" height="100" />
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-top teal rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Plant</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">Pune</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-top green rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Shop Floor</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">Piston</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-top gray rounded" >
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Machine ID</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">{{ selectedMachineId }}</p>
      </div>
    </div>
    <div class="col-md-1">
      <div class="mt-1 card-top ">
        <img class="siren-icon siren-icon-right" src="https://img.icons8.com/ios-filled/100/40C057/siren.png" alt="siren" width="70" height="100" />
      </div>
    </div>
  </div>
  <div class="row justify-content-between">
    <div class="col-md-3">
      <div class="shadow mt-1 card-down blue rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Machine Running</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">00:00</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-down yellow rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Machine Idle</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">00:00</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-down purple rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder; ">Production Target</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">00:00</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="shadow mt-1 card-down lightblue rounded">
        <!-- Your content goes here -->
        <p style="font-weight: bolder;">Production Achieved</p>
        <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color: black;">00:00</p>
      </div>
    </div>
    <div>
    </div>
  </div>
</div>



<div class="container-fluid mt-1">
  <div class="row">
    <div class="col-12">
      <div class="container-wide">
        <div class="scale">
          <p class="mt-1">{{getShiftText()}} - {{ currentTime | date:'shortTime' }}</p>
        </div>
        <div class="row">
          <div class="col-10">
            <div class="progress">
              <div class="progress-bar-green" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" [style.width.%]="100 - ((calculateTotalMinutes(andonList) / 480) * 100)">{{ 480 - (calculateTotalMinutes(andonList)) }} min</div>
              <div class="progress-bar-red" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" [style.width.%]="(calculateTotalMinutes(andonList) / 480) * 100">{{ calculateTotalMinutes(andonList) }} min</div>
            </div>
            <div class="progress mt-2">
              <div class="progress-bar-yellow" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" [style.width.%]="(calculateTotalMechanicalMinutes(andonList) / calculateTotalMinutes(andonList)) * 100">{{ calculateTotalMechanicalMinutes(andonList) }} min</div>
              <div class="progress-bar-blue" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" [style.width.%]="(calculateTotalElectricalMinutes(andonList) / calculateTotalMinutes(andonList)) * 100">{{ calculateTotalElectricalMinutes(andonList) }} min</div>
              <div class="progress-bar-purple" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" [style.width.%]="(calculateTotalOthersMinutes(andonList) / calculateTotalMinutes(andonList)) * 100">{{ calculateTotalOthersMinutes(andonList) }} min</div>
            </div>
            <div class="bar-info">
              <div class="bar-info-item">Running</div>
              <div class="bar-info-item">Breakdown</div>
              <div class="bar-info-item">Electrical Failure</div>
              <div class="bar-info-item">Mechanical Failure</div>
              <div class="bar-info-item">Others</div>
            </div>
          </div>
          <div class="col-2 custom-table-container">
            <table>
              <tr>
                <td style="font-size: smaller; background-color:gray">ID</td>
                <td style="font-size: smaller; background-color:gray">Date</td>
                <td style="font-size: smaller; background-color:gray">Shift</td>
                <td style="font-size: smaller; background-color:gray">OEE</td>
                <td style="font-size: smaller; background-color:gray">Details</td>
              </tr>
              <tr>
                <td style="font-size: smaller;">2345</td>
                <td style="font-size: smaller;">15/06/23</td>
                <td style="font-size: smaller;">A</td>
                <td style="font-size: smaller;">{{100 - ((calculateTotalMinutes(andonList) / 480) * 100) | number:'0.00' }}%</td>
                <td style="font-size: smaller;"><i class="fa-solid fa-eye fa-xs"></i></td>

              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




<div class="container-fluid mt-2">
  <!-- <div class="table-responsive"> -->
  <div class="search-bar">
    <input [(ngModel)]="searchText" class="form-control"
  (keyup)="filterData()" placeholder="Search">
  </div>
</div>
<div class="container-fluid mt-2">
  <div class="row">
    <div class="col-12">
      <div class="container-wide2">
        <div class="table-container">
          <div class="table-header">
            <div class="table-cell">Start<br> M/C</div>
            <!-- <div class="table-cell">Ticket</div> -->
            <div class="table-cell">Login</div>
            <div class="table-cell">Machine ID</div>
            <!-- <div class="table-cell">Shift</div> -->
            <!-- <div class="table-cell">Date</div> -->
            <div class="table-cell">Category</div>
            <div class="table-cell">Sub-Category</div>
            <div class="andon-alert">Andon <br>Alert</div>
            <div class="andon-acknowledge">Andon <br>Acknowledge</div>
            <div class="andon-resolved">Andon<br> Resolved</div>
            <div class="total-breakdown">Total <br>Breakdown</div>
          </div>
          <div class="table-row form-group">
            <div class="table-cell"><img src="assets/images/power.png" alt="" width="40" height="40"></div>
            <!-- <div class="table-cell"></div> -->
            <div class="table-cell">XYZ</div>
            <div class="table-cell machine-id">
              <div>
                <select class="form-control" [(ngModel)]="machineId" placeholder="Select Options" [(ngModel)]="selectedMachineId">
                  <option value="" disabled selected>-Select-</option>
                  <option>2345</option>
                  <option>4456</option>
                  <option>5643</option>
                </select>
              </div>
            </div>

            <!-- <div class="table-cell">15/06/2023</div> -->
            <div class="table-cell category">
              <div>
                <select class="form-control"  [(ngModel)]="category" placeholder="Select Options" [(ngModel)]="selectedCategory">
                  <option value="" disabled selected>--Select--</option>
                  <option>Mechanical</option>
                  <option>Electrical</option>
                  <option>Others</option>
                </select>
              </div>
            </div>
            <div class="table-cell sub-category">
              <div  >
                <select class="form-control" [(ngModel)]="sub_category" placeholder="Select Options" *ngIf="selectedCategory === 'Mechanical'">
                  <option value="" disabled selected>--Select--</option>
                  <option>None</option>
                  <option>Mech-1</option>
                  <option>Mech-2</option>
                  <option>Mech-3</option>
                </select>
              </div>
              <div  >
                <select class="form-control" [(ngModel)]="sub_category" placeholder="Select Options" *ngIf="selectedCategory === 'Electrical'">
                  <option value="" disabled selected>--Select--</option>
                  <option>None</option>
                  <option>Elec-1</option>
                  <option>Elec-2</option>
                  <option>Elec-3</option>
                </select>
              </div>
              <div >
                <select class="form-control" [(ngModel)]="sub_category" placeholder="Select Options" *ngIf="selectedCategory === 'Others'">
                  <option value="" disabled selected>--Select--</option>
                  <option>None</option>
                  <option>Other-1</option>
                  <option>Other-2</option>
                  <option>Other-3</option>
                </select>
              </div>
            </div>
            <!-- Andon Alert -->
            <div class="table-cell andon-alert">
              <button class="raise-alert-button" *ngIf="!andonAlertCompleted" (click)="addAnd()" (click)="onAndonAlert()">
                Raise <br>Alert
              </button>
              <p class="timestamp" *ngIf="andonAlertCompleted">
                {{ getFormattedTimestamp(andonAlertTimestamp) }}
              </p>
            </div>

            <!-- Andon Acknowledge -->
            <div class="table-cell andon-acknowledge">
              <button class="raise-acknowledge-button" *ngIf="!andonAcknowledgeCompleted" (click)="onAndonAcknowledge()">
                Acknowledge
              </button>
              <p class="timestamp" *ngIf="andonAcknowledgeCompleted">
                {{ getFormattedTimestamp(andonAcknowledgeTimestamp) }}
              </p>
            </div>

            <!-- Andon Resolved -->
            <div class="table-cell andon-resolved">
              <button class="raise-resolved-button" *ngIf="!andonResolvedCompleted" (click)="onAndonResolved()">
                Resolved
              </button>
              <p class="timestamp" *ngIf="andonResolvedCompleted">
                {{ getFormattedTimestamp(andonResolvedTimestamp) }}
              </p>
            </div>

            <div class="table-cell total-breakdown">
              {{ counter }}
            </div>
          </div>
          <!-- Add more rows as needed -->
        </div>
      </div>
    </div>
  </div>
</div>
